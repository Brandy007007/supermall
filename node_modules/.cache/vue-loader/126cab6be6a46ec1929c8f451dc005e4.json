{"remainingRequest":"/Users/yanjiang/Desktop/cliTest/supermall/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yanjiang/Desktop/cliTest/supermall/src/views/detail/Detail.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yanjiang/Desktop/cliTest/supermall/src/views/detail/Detail.vue","mtime":1611381196501},{"path":"/Users/yanjiang/Desktop/cliTest/supermall/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yanjiang/Desktop/cliTest/supermall/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBDaGlsZENvbXBvbmVudHMgZnJvbSAidmlld3MvZGV0YWlsL2NoaWxkY29tcG9uZW50cy9DaGlsZENvbXBvbmVudHMiOwppbXBvcnQgRGV0YWlsU3dpcGVyIGZyb20gInZpZXdzL2RldGFpbC9jaGlsZGNvbXBvbmVudHMvRGV0YWlsU3dpcGVyIjsKaW1wb3J0IERldGFpbEJhc2VJbmZvIGZyb20gInZpZXdzL2RldGFpbC9jaGlsZGNvbXBvbmVudHMvRGV0YWlsQmFzZUluZm8iOwppbXBvcnQgRGV0YWlsU2hvcEluZm8gZnJvbSAidmlld3MvZGV0YWlsL2NoaWxkY29tcG9uZW50cy9EZXRhaWxTaG9wSW5mbyI7CmltcG9ydCBEZXRhaWxHb29kc0luZm8gZnJvbSAidmlld3MvZGV0YWlsL2NoaWxkY29tcG9uZW50cy9EZXRhaWxHb29kc0luZm8iOwppbXBvcnQgRGV0YWlsUGFyYW1JbmZvIGZyb20gInZpZXdzL2RldGFpbC9jaGlsZGNvbXBvbmVudHMvRGV0YWlsUGFyYW1JbmZvIjsKaW1wb3J0IERldGFpbENvbW1lbnRJbmZvIGZyb20gInZpZXdzL2RldGFpbC9jaGlsZGNvbXBvbmVudHMvRGV0YWlsQ29tbWVudEluZm8iOwppbXBvcnQgRGV0YWlsQm90dG9tQmFyIGZyb20gInZpZXdzL2RldGFpbC9jaGlsZGNvbXBvbmVudHMvRGV0YWlsQm90dG9tQmFyIjsKaW1wb3J0IEdvb2RzTGlzdCBmcm9tICJjb21wb25lbnRzL2NvbnRlbnQvZ29vZHMvR29vZHNMaXN0IjsKaW1wb3J0IEJhY2tUb3AgZnJvbSAiY29tcG9uZW50cy9jb250ZW50L2JhY2t0b3AvQmFja1RvcCI7CmltcG9ydCBTY3JvbGwgZnJvbSAiY29tcG9uZW50cy9jb21tb24vc2Nyb2xsL1Njcm9sbCI7CgppbXBvcnQgewogIGdldERldGFpbCwKICBHb29kcywKICBTaG9wLAogIEdvb2RzUGFyYW0sCiAgZ2V0UmVjb21tZW5kLAp9IGZyb20gIm5ldHdvcmsvZGV0YWlsLmpzIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJEZXRhaWwiLAogIGNvbXBvbmVudHM6IHsKICAgIENoaWxkQ29tcG9uZW50cywKICAgIERldGFpbFN3aXBlciwKICAgIERldGFpbEJhc2VJbmZvLAogICAgRGV0YWlsU2hvcEluZm8sCiAgICBEZXRhaWxHb29kc0luZm8sCiAgICBEZXRhaWxQYXJhbUluZm8sCiAgICBEZXRhaWxDb21tZW50SW5mbywKICAgIERldGFpbEJvdHRvbUJhciwKICAgIEdvb2RzTGlzdCwKICAgIEJhY2tUb3AsCiAgICBTY3JvbGwsCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgaWlkOiBudWxsLAogICAgICB0b3BJbWFnZXM6IFtdLAogICAgICBnb29kczoge30sCiAgICAgIHNob3A6IHt9LAogICAgICBkZXRhaWxJbmZvOiB7fSwKICAgICAgcGFyYW1JbmZvOiB7fSwKICAgICAgY29tbWVudEluZm86IHt9LAogICAgICByZWNvbW1lbmRzOiBbXSwKICAgICAgdGhlbWVUb3BZOiBbXSwKICAgICAgY3VycmVudEluZGV4OiAwLAogICAgICBpc1Nob3dCYWNrVG9wOiBmYWxzZSwKICAgIH07CiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5paWQgPSB0aGlzLiRyb3V0ZS5wYXJhbXMuaWlkOwoKICAgIGdldERldGFpbCh0aGlzLmlpZCkudGhlbigocmVzKSA9PiB7CiAgICAgIGNvbnNvbGUubG9nKHJlcyk7CiAgICAgIGNvbnN0IGRhdGEgPSByZXMucmVzdWx0OwogICAgICAvLyAgIHJlcy1yZXN1bHQtaXRlbWluZm8tdG9waW1hZ2UKICAgICAgdGhpcy50b3BJbWFnZXMgPSBkYXRhLml0ZW1JbmZvLnRvcEltYWdlczsKCiAgICAgIHRoaXMuZ29vZHMgPSBuZXcgR29vZHMoCiAgICAgICAgZGF0YS5pdGVtSW5mbywKICAgICAgICBkYXRhLmNvbHVtbnMsCiAgICAgICAgZGF0YS5zaG9wSW5mby5zZXJ2aWNlcwogICAgICApOwogICAgICB0aGlzLnNob3AgPSBuZXcgU2hvcChkYXRhLnNob3BJbmZvKTsKCiAgICAgIHRoaXMuZGV0YWlsSW5mbyA9IGRhdGEuZGV0YWlsSW5mbzsKCiAgICAgIHRoaXMucGFyYW1JbmZvID0gbmV3IEdvb2RzUGFyYW0oCiAgICAgICAgZGF0YS5pdGVtUGFyYW1zLmluZm8sCiAgICAgICAgZGF0YS5pdGVtUGFyYW1zLnJ1bGUKICAgICAgKTsKICAgICAgaWYgKGRhdGEucmF0ZS5saXN0ICE9PSAwKSB7CiAgICAgICAgdGhpcy5jb21tZW50SW5mbyA9IGRhdGEucmF0ZS5saXN0WzBdOwogICAgICB9CiAgICAgIGdldFJlY29tbWVuZCgpLnRoZW4oKHJlcykgPT4gewogICAgICAgIGNvbnNvbGUubG9nKHJlcyk7CiAgICAgICAgdGhpcy5yZWNvbW1lbmRzID0gcmVzLmRhdGEubGlzdDsKICAgICAgfSk7CiAgICB9KTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGltYWdlTG9hZCgpIHsKICAgICAgdGhpcy4kcmVmcy53cmFwcGVyLnJlZnJlc2goKTsKICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICAgIHRoaXMudGhlbWVUb3BZID0gW107CiAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy4kcmVmcy5wYXJhbSk7CiAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy4kcmVmcy5jb21tZW50KTsKICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLiRyZWZzLmRhdGFpbGdvb2RzKTsKICAgICAgICB0aGlzLnRoZW1lVG9wWS5wdXNoKDApOwogICAgICAgIHRoaXMudGhlbWVUb3BZLnB1c2godGhpcy4kcmVmcy5wYXJhbS4kZWwub2Zmc2V0VG9wIC0gNDQpOwogICAgICAgIHRoaXMudGhlbWVUb3BZLnB1c2godGhpcy4kcmVmcy5jb21tZW50LiRlbC5vZmZzZXRUb3AgLSA0NCk7CiAgICAgICAgdGhpcy50aGVtZVRvcFkucHVzaCh0aGlzLiRyZWZzLmRhdGFpbGdvb2RzLiRlbC5vZmZzZXRUb3AgLSA0NCk7CiAgICAgICAgdGhpcy50aGVtZVRvcFkucHVzaChOdW1iZXIuTUFYX1ZBTFVFKTsKICAgICAgICBjb25zb2xlLmxvZyh0aGlzLnRoZW1lVG9wWSk7CiAgICAgIH0pOwogICAgfSwKICAgIGRldGFpbFRvcENsaWNrKGluZGV4KSB7CiAgICAgIC8vIGNvbnNvbGUubG9nKGluZGV4KTsKICAgICAgdGhpcy4kcmVmcy53cmFwcGVyLnNjcm9sbFRvKDAsIC10aGlzLnRoZW1lVG9wWVtpbmRleF0sIDIwMCk7CiAgICB9LAogICAgY29udGVudFNjcm9sbChwb3NpdGlvbikgewogICAgICAvLyBjb25zb2xlLmxvZyhwb3NpdGlvbik7CiAgICAgIHRoaXMuaXNTaG93QmFja1RvcCA9IC1wb3NpdGlvbi55ID4gNTAwOwogICAgICBjb25zdCBwb3NpdGlvblkgPSAtcG9zaXRpb24ueTsKICAgICAgY29uc3QgbGVuZ3RoID0gdGhpcy50aGVtZVRvcFkubGVuZ3RoOwogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aCAtIDE7IGkrKykgewogICAgICAgIGlmICgKICAgICAgICAgIHRoaXMuY3VycmVudEluZGV4ICE9PSBpICYmCiAgICAgICAgICBwb3NpdGlvblkgPj0gdGhpcy50aGVtZVRvcFlbaV0gJiYKICAgICAgICAgIHBvc2l0aW9uWSA8IHRoaXMudGhlbWVUb3BZW2kgKyAxXQogICAgICAgICkgewogICAgICAgICAgLy8gdGhpcy5jdXJyZW50SW5kZXggPSBpOwogICAgICAgICAgdGhpcy4kcmVmcy5kZXRhaWxUb3BCYXIuY3VycmVudEluZGV4ID0gaTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBiYWNrQ2xpY2soKSB7CiAgICAgIC8vIGNvbnNvbGUubG9nKCLnrq3lpLTngrnlh7vkuoYiKTsKICAgICAgLy8gY29uc29sZS5sb2codGhpcy4kcmVmcy5zY3JvbGwuc2Nyb2xsKTsKICAgICAgdGhpcy4kcmVmcy53cmFwcGVyLnNjcm9sbFRvKDAsIDAsIDUwMCk7CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["Detail.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Detail.vue","sourceRoot":"src/views/detail","sourcesContent":["<template>\n  <div class=\"detail\">\n    <child-components\n      class=\"detailtopbar\"\n      @detailTopClick=\"detailTopClick\"\n      ref=\"detailTopBar\"\n    ></child-components>\n    <scroll\n      class=\"content\"\n      ref=\"wrapper\"\n      :pullUpLoad=\"true\"\n      @scroll=\"contentScroll\"\n    >\n      <detail-swiper :top-images=\"topImages\"></detail-swiper>\n      <detail-base-info :goods=\"goods\"></detail-base-info>\n      <detail-shop-info :shop=\"shop\"></detail-shop-info>\n      <detail-goods-info\n        :detail-info=\"detailInfo\"\n        @imageLoad=\"imageLoad\"\n      ></detail-goods-info>\n      <detail-param-info\n        :param-info=\"paramInfo\"\n        ref=\"param\"\n      ></detail-param-info>\n      <detail-comment-info\n        :comment-info=\"commentInfo\"\n        ref=\"comment\"\n      ></detail-comment-info>\n      <goods-list :goods=\"recommends\" ref=\"datailgoods\"></goods-list>\n    </scroll>\n    <detail-bottom-bar class=\"detail-bottom\"></detail-bottom-bar>\n    <back-top @click.native=\"backClick\" v-show=\"isShowBackTop\"></back-top>\n  </div>\n</template>\n\n<script>\nimport ChildComponents from \"views/detail/childcomponents/ChildComponents\";\nimport DetailSwiper from \"views/detail/childcomponents/DetailSwiper\";\nimport DetailBaseInfo from \"views/detail/childcomponents/DetailBaseInfo\";\nimport DetailShopInfo from \"views/detail/childcomponents/DetailShopInfo\";\nimport DetailGoodsInfo from \"views/detail/childcomponents/DetailGoodsInfo\";\nimport DetailParamInfo from \"views/detail/childcomponents/DetailParamInfo\";\nimport DetailCommentInfo from \"views/detail/childcomponents/DetailCommentInfo\";\nimport DetailBottomBar from \"views/detail/childcomponents/DetailBottomBar\";\nimport GoodsList from \"components/content/goods/GoodsList\";\nimport BackTop from \"components/content/backtop/BackTop\";\nimport Scroll from \"components/common/scroll/Scroll\";\n\nimport {\n  getDetail,\n  Goods,\n  Shop,\n  GoodsParam,\n  getRecommend,\n} from \"network/detail.js\";\nexport default {\n  name: \"Detail\",\n  components: {\n    ChildComponents,\n    DetailSwiper,\n    DetailBaseInfo,\n    DetailShopInfo,\n    DetailGoodsInfo,\n    DetailParamInfo,\n    DetailCommentInfo,\n    DetailBottomBar,\n    GoodsList,\n    BackTop,\n    Scroll,\n  },\n  data() {\n    return {\n      iid: null,\n      topImages: [],\n      goods: {},\n      shop: {},\n      detailInfo: {},\n      paramInfo: {},\n      commentInfo: {},\n      recommends: [],\n      themeTopY: [],\n      currentIndex: 0,\n      isShowBackTop: false,\n    };\n  },\n  created() {\n    this.iid = this.$route.params.iid;\n\n    getDetail(this.iid).then((res) => {\n      console.log(res);\n      const data = res.result;\n      //   res-result-iteminfo-topimage\n      this.topImages = data.itemInfo.topImages;\n\n      this.goods = new Goods(\n        data.itemInfo,\n        data.columns,\n        data.shopInfo.services\n      );\n      this.shop = new Shop(data.shopInfo);\n\n      this.detailInfo = data.detailInfo;\n\n      this.paramInfo = new GoodsParam(\n        data.itemParams.info,\n        data.itemParams.rule\n      );\n      if (data.rate.list !== 0) {\n        this.commentInfo = data.rate.list[0];\n      }\n      getRecommend().then((res) => {\n        console.log(res);\n        this.recommends = res.data.list;\n      });\n    });\n  },\n  methods: {\n    imageLoad() {\n      this.$refs.wrapper.refresh();\n      this.$nextTick(() => {\n        this.themeTopY = [];\n        // console.log(this.$refs.param);\n        // console.log(this.$refs.comment);\n        // console.log(this.$refs.datailgoods);\n        this.themeTopY.push(0);\n        this.themeTopY.push(this.$refs.param.$el.offsetTop - 44);\n        this.themeTopY.push(this.$refs.comment.$el.offsetTop - 44);\n        this.themeTopY.push(this.$refs.datailgoods.$el.offsetTop - 44);\n        this.themeTopY.push(Number.MAX_VALUE);\n        console.log(this.themeTopY);\n      });\n    },\n    detailTopClick(index) {\n      // console.log(index);\n      this.$refs.wrapper.scrollTo(0, -this.themeTopY[index], 200);\n    },\n    contentScroll(position) {\n      // console.log(position);\n      this.isShowBackTop = -position.y > 500;\n      const positionY = -position.y;\n      const length = this.themeTopY.length;\n      for (let i = 0; i < length - 1; i++) {\n        if (\n          this.currentIndex !== i &&\n          positionY >= this.themeTopY[i] &&\n          positionY < this.themeTopY[i + 1]\n        ) {\n          // this.currentIndex = i;\n          this.$refs.detailTopBar.currentIndex = i;\n        }\n      }\n    },\n    backClick() {\n      // console.log(\"箭头点击了\");\n      // console.log(this.$refs.scroll.scroll);\n      this.$refs.wrapper.scrollTo(0, 0, 500);\n    },\n  },\n};\n</script>\n\n<style scoped>\n.detail {\n  position: relative;\n  z-index: 10;\n  background-color: white;\n  \n  height: 100vh;\n}\n.detailtopbar {\n  position: relative;\n  z-index: 11;\n  background-color:white;\n}\n.content {\n  height: calc(100% -44px -49px);\n\n  /* background-color: #fff; */\n  overflow: hidden;\n}\n.detail-bottom {\n  background-color: #fff;\n}\n</style>"]}]}